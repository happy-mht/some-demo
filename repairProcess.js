var data = [{
	"id": 1,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 2,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "异常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 3,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 4,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 5,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "异常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 6,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "异常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 7,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 8,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 9,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 10,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 11,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 12,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 13,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 14,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 15,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 16,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 17,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}, {
	"id": 18,
	"seq_no": "XHJ_001",
	"position": "永盛路/沪宜公路",
	"type": "信号机",
	"status": "正常",
	"fault": "无",
	"fault_cause": "无",
	"occur_time": "04/01/2015",
	"quality_time": "03/31/2019",
	"maintain_time": "03/01/2017",
	"operate": "修改",
	"maintain_unit": "A单位",
	"maintain_reason": "XX故障"
}];

function operateFormatter(value, row, index) {
	return [
		'<button id="btn_detail" type="button" class="RoleOfA btn-default bt-select oper">详情</button>',
		'<button type="button" class="RoleOfB btn-default bt-select oper">处理</button>',
		'<button type="button" class="RoleOfC btn-default bt-select oper">返还</button>'
	].join('');
}
$(document).ready(function() {
	var $table=$("#table");
	$("select").select2();
$('.form_date').datetimepicker({
	language: 'zh-CN',
	weekStart: 1,
	todayBtn: 1,
	autoclose: 1,
	todayHighlight: 1,
	startView: 2,
	minView: 2,
	forceParse: 0
});

	var detailmodal = new Modal({
		title: '设施信息',
		content: $('#detail_modal_cont').html(),
		width: 600,
		buttons: [{
			html: '<button type="button" class="btn btn-sm btn-primary btn-ok">确定</button>',
			selector: '.btn-ok',
			callback: function() {
				//点击确定按钮的回调
			}
		}]
	});
	var dealmodal=new Modal({
		title: '处理信息',
		content:'<form class="deal-form"><div class="form-inline"><span>备注</span>'+
				'<textarea name="comment" style="vertical-align: middle;" rows="10" cols="35"></textarea>'+
				'</div></form>' ,
		width: 400,
		buttons: [{
			html: '<button type="button" class="btn btn-sm btn-primary btn-ok">保存</button>',
			selector: '.btn-ok',
			callback: function() {
				//点击确定按钮的回调
			}
		},{
			html: '<button type="button" class="btn btn-sm btn-primary btn-cancel">取消</button>',
			selector: '.btn-cancel',
			callback: function() {
				//点击确定按钮的回调
			}
		}]
	});
	window.operateEvents = {
	'click .RoleOfA': function(e, value, row, index) {
		detailmodal.open();
		$("#dev_id").val(row.id);
		$("#seq_no").val(row.seq_no);
		$("#dev_pos").val(row.position);
		$("#dev_type1").val(row.type);
		$("#dev_status").val(row.status);
		$("#fault").val(row.fault);
		$("#fault_cause").val(row.fault_cause);
		$("#occur_time").val(row.occur_time);
		$("#quality_time").val(row.quality_time);
		$("#maintain_time").val(row.maintain_time);
		$("#maintain_reason").val(row.maintain_reason);
		$("#maintain_unit").val(row.maintain_unit);
		//for (var i in row ) console.log(i);
	},
	'click .RoleOfB': function(e, value, row, index) {
		dealmodal.open();	
	},
	'click .RoleOfC': function(e, value, row, index) {
		alert("C");
	}
};

	$table.bootstrapTable({
		url: './json/dev_edit.json',
		//data: data,
		toolbar: '#toolbar', //工具按钮用哪个容器
		//striped: true, //是否显示行间隔色
		cache: false, //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
		pagination: true, //是否显示分页（*）
		sortable: true, //是否启用排序
		sortOrder: "asc", //排序方式
		//queryParams: postQueryParams,//传递参数（*）
		//sidePagination: "server",      //分页方式：client客户端分页，server服务端分页（*）
		pageSize: 5, //每页的记录行数（*）
		pageList: [10, 25, 50, 100], //可供选择的每页的行数（*）
		strictSearch: true,
		uniqueId: "id", //每一行的唯一标识，一般为主键列
		cardView: false, //是否显示详细视图
		detailView: false, //是否显示父子表
		paginationHAlign: "left",
		//search:true,               //是否显示表格搜索，此搜索是客户端搜索，不会进服务端
		//strictSearch: true,
		minimumCountColumns: 2, //最少允许的列数
		clickToSelect: true, //是否启用点击选中行,为true时点击复选框无效？？？
		paginationPreText: "<<",
		paginationNextText: ">>",
		columns: [{
			checkbox: true,
			width:'55px',
		}, {
			field: 'seq_no',
			title: '编号',
		}, {
			field: 'position',
			title: '位置',
		}, {
			field: 'type',
			title: '类型',
		}, {
			field: 'status',
			title: '状态',
		}, {
			field: 'fault',
			title: '故障现象',
		}, {
			field: 'fault_cause',
			title: '故障原因',
		}, {
			field: 'occur_time',
			title: '发生时间',
		}, {
			field: 'quality_time',
			title: '质保时间',
		}, {
			field: 'maintain_time',
			title: '维护时间',
		}, {
			field: 'maintain_reason',
			title: '维护原因',
		},{
			field: 'maintain_unit',
			title: '维护单位',
		}, {
			field: 'operate',
			title: '操作',
			events: operateEvents,
			formatter: operateFormatter
		}, ]
	});
	$("#btn_delete").click(function() {
		var ids = $.map($table.bootstrapTable('getSelections'), function(row) {
			return row.id;
		});
		console.log(ids);
		if(ids == "") alert('请选取要删除的数据！');
		else confirm("确定要删除此数据？");
		$table.bootstrapTable('remove', {
			field: 'id',
			values: ids
		});
	});
	$('#bt_selectall').click(function() {
		$table.bootstrapTable('checkAll');
	});
	$('#bt_unselectall').click(function() {
		$table.bootstrapTable('uncheckAll');
	});
	$('#btn_detail').click(function() {
		detailmodal.open();
	});
})